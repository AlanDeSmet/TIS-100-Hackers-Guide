<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
<title>Lua Library - TIS-100 Hacker's Guide</title>
<meta content='True' name='HandheldFriendly' />  
<meta content='width=device-width; initial-scale=1.0;' name='viewport' />  
<meta name="viewport" content="width=device-width" />
<link href='https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic|Michroma|Roboto+Condensed|Roboto+Mono:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="index.css" type="text/css">
</head>
<body>

<h1 class="sitetitle"> <a class="sitetitle" href="index.html">TIS-100 Hacker's Guide</a><br> </h1>
<h1> Lua Library </h1>

<p>These are the functions and variables exposed to the <a href="lua.html">Lua puzzle programs</a></p>

<ul>
<li><em>Base</em> are part of the base Lua release
</li>
<li><em>Moon</em> are new to MoonSharp
</li>
<li><em>TIS</em> are new to TIS-100
</li>
</ul>

<h2>Constants</h2>

<p>Lua puzzles should probably not rely on specific values for the <code>STREAM_</code> and <code>TILE_</code> constants.</p>

<ul>
<li><p><strong><code>STREAM_INPUT</code></strong>  = 2000. <em>TIS</em></p></li>
<li><p><strong><code>STREAM_OUTPUT</code></strong> = 2001. <em>TIS</em></p></li>
<li><p><strong><code>STREAM_IMAGE</code></strong>  = 2002. <em>TIS</em></p></li>
<li><p><strong><code>TILE_COMPUTE</code></strong>  = 1000. <em>TIS</em></p></li>
<li><p><strong><code>TILE_MEMORY</code></strong>   = 1001. <em>TIS</em></p></li>
<li><p><strong><code>TILE_DAMAGED</code></strong>  = 1002. <em>TIS</em></p></li>
<li><p><strong><code>_VERSION</code></strong>      = "MoonSharp 0.9.5.0". <em>Moon</em></p></li>
</ul>

<h2>Functions</h2>

<ul>
<li><p><strong><code>assert(v [, message])</code></strong> - <em>Base</em> As of July 5, 2015, if <code>v</code> is false, causes compilation to fail with a "The script took too long to finish executing and was aborted" error.  Otherwise does nothing.  <em>Likely of dubious use in puzzle Lua.</em> <a href="http://www.lua.org/manual/5.2/manual.html#pdf-assert">Lua documentation</a>.  (In theory: If <code>v</code> is false, exits with message <code>message</code> or "assertion failed!" if no <code>message</code> is specified. Otherwise returns all arguments. )</p></li>
<li><p><strong><code>collectgarbage([opt [, arg]])</code></strong> - <em>Base</em> Interface for managing garbage collection. <em>Likely of dubious use in puzzle Lua.</em> <a href="http://www.lua.org/manual/5.2/manual.html#pdf-collectgarbage">Lua documentation</a>. <strong>TODO</strong> What does this do in practice?</p></li>
<li><p><strong><code>error(message [, level])</code></strong> -  <em>Base</em> As of July 5, 2015, causes compilation to fail with a "The script took too long to finish executing and was aborted" error.  <em>Likely of dubious use in puzzle Lua.</em> <a href="http://www.lua.org/manual/5.2/manual.html#pdf-error">Lua documentation</a>. (In theory: throws an error.)</p></li>
<li><p><strong><code>ipairs(t)</code></strong> - <em>Base</em> Iterates over the table <code>t</code> as though it was an array, returning the keys 1, 2,... and their matching values until the next integer key is missing. <a href="http://www.lua.org/manual/5.2/manual.html#pdf-ipairs">Lua documentation</a>. Example:</p>

<pre><code>local input = { 1, 2, 3, 4, 5 }
local output = {}
for i,v in ipairs(input) do
    output[i] = input[i] * 2
end
</code></pre></li>
<li><p><strong><code>next(table [, index])</code></strong> - <em>Base</em> Returns the next index and value from the <code>table</code>. If <code>index</code> is nil, returns the first index and value. Items in the table may be returned in any order.  Adding a new index to the table may cause existing indices to be invalid.  In most cases <code>pairs()</code> or <code>ipairs()</code> will be simpler.  <a href="http://www.lua.org/manual/5.2/manual.html#pdf-next">Lua documentation</a></p></li>
<li><p><strong><code>pack(...)</code></strong> - <em>Moon</em> Alias for <code>table.pack</code>.</p></li>
<li><p><strong><code>pairs(t)</code></strong> - <em>Base</em> Iterates over all index value pairs in table <code>t</code>.  If the table is being used as an array with integer indices, <code>ipairs()</code> may be a better solution.  <a href="http://www.lua.org/manual/5.2/manual.html#pdf-pairs">Lua documentation</a></p></li>
<li><p><strong><code>print(...)</code></strong> - <em>Base</em> Prints one or more values separated with tabs and terminated with a newline. <em>Likely of dubious value in puzzle Lua.</em> <a href="http://www.lua.org/manual/5.2/manual.html#pdf-print">Lua documentation</a></p></li>
<li><p><strong><code>select(index, ...)</code></strong> - <em>Base</em> If <code>index</code> is a integer value greater or equal to 1, returns remaining arguments from that point forward. <a href="http://www.lua.org/manual/5.2/manual.html#pdf-select">Lua documentation</a></p></li>
<li><p><strong><code>tonumber(e [, base])</code></strong> - <em>Base</em> Return <code>e</code> as a number. If <code>base</code> is specified, <code>e</code> is interpreted as being in that base. Return nil is e cannot be parsed. <a href="http://www.lua.org/manual/5.2/manual.html#pdf-tonumber">Lua documentation</a></p></li>
<li><p><strong><code>tostring(v)</code></strong> - <em>Base</em> Return <code>v</code> as a string. Numbers are converted to a string representation. Functions and tables return "function: <em>address</em>" and "table: <em>address</em>" respectively. <a href="http://www.lua.org/manual/5.2/manual.html#pdf-tostring">Lua documentation</a></p></li>
<li><p><strong><code>type(v)</code></strong> - <em>Base</em> Returns a string describing the type of <code>v</code>.  Responses include "string", "number", "boolean", "nil", "table", and "function".   May return "userdata" or "thread" in some cases.  <a href="http://www.lua.org/manual/5.2/manual.html#pdf-type">Lua documentation</a></p></li>
<li><p><strong><code>unpack(list [, i [, j]]))</code></strong> - <em>Moon</em> Alias for <code>table.unpack</code>.</p></li>
</ul>

<h2>math</h2>

<p>The math library</p>

<ul>
<li><p><strong><code>math.abc</code></strong> - </p></li>
<li><p><strong><code>math.acos</code></strong> - </p></li>
<li><p><strong><code>math.asin</code></strong> - </p></li>
<li><p><strong><code>math.atan</code></strong> - </p></li>
<li><p><strong><code>math.atan2</code></strong> - </p></li>
<li><p><strong><code>math.ceil</code></strong> - </p></li>
<li><p><strong><code>math.cos</code></strong> - </p></li>
<li><p><strong><code>math.cosh</code></strong> - </p></li>
<li><p><strong><code>math.deg</code></strong> - </p></li>
<li><p><strong><code>math.exp</code></strong> - </p></li>
<li><p><strong><code>math.floor</code></strong> - </p></li>
<li><p><strong><code>math.fmod</code></strong> - </p></li>
<li><p><strong><code>math.frexp</code></strong> - </p></li>
<li><p><strong><code>math.ldexp</code></strong> - </p></li>
<li><p><strong><code>math.log</code></strong> - </p></li>
<li><p><strong><code>math.max</code></strong> - </p></li>
<li><p><strong><code>math.min</code></strong> - </p></li>
<li><p><strong><code>math.modf</code></strong> - </p></li>
<li><p><strong><code>math.pow</code></strong> - </p></li>
<li><p><strong><code>math.rad</code></strong> - </p></li>
<li><p><strong><code>math.random</code></strong> - </p></li>
<li><p><strong><code>math.randomseed</code></strong> - </p></li>
<li><p><strong><code>math.sin</code></strong> - </p></li>
<li><p><strong><code>math.sinh</code></strong> - </p></li>
<li><p><strong><code>math.sqrt</code></strong> - </p></li>
<li><p><strong><code>math.tan</code></strong> - </p></li>
<li><p><strong><code>math.tanh</code></strong> - </p></li>
<li><p><strong><code>math.pi</code></strong> 3.14159265358979 </p></li>
<li><p><strong><code>math.huge</code></strong> 1.79769313486232E+308 <strong>TODO</strong> Is this infinity?</p></li>
</ul>

<h2>Other</h2>

<ul>
<li><p><strong><code>_G</code></strong> - <em>Base Lua.</em> A table containing all of these variables, tables, and functions, including <code>_G</code> itself.</p></li>
<li><p><strong><code>bit32</code></strong> -        TABLE</p></li>
<li><p><strong><code>_MOONSHARP</code></strong> -   Information about the MoonSharp implementation.  It is recommended that Lua puzzles do not interact with these variables.  The below values are from the Linux version of TIS-100 and may vary on other platforms.</p>

<ul>
<li><strong><code>is_aot</code></strong> = false
</li>
<li><strong><code>is_clr4</code></strong> = false
</li>
<li><strong><code>is_mono</code></strong> = true
</li>
<li><strong><code>is_pcl</code></strong> = false
</li>
<li><strong><code>is_unity</code></strong> = true
</li>
<li><strong><code>luacompat</code></strong> = "5.2"
</li>
<li><strong><code>platform</code></strong> = "limited.unity.mono.clr2"
</li>
<li><strong><code>version</code></strong> = "0.9.5.0"
</li>
</ul></li>
<li><p><strong><code>package.loaded</code></strong> - <code>package</code> only contains <code>loaded</code></p>

<ul>
<li><strong><code>string</code></strong> TABLE
</li>
<li><strong><code>table</code></strong> TABLE
</li>
<li><strong><code>math</code></strong> TABLE
</li>
<li><strong><code>bit32</code></strong> TABLE
</li>
</ul></li>
<li><p><strong><code>string</code></strong> -       TABLE</p></li>
<li><p><strong><code>table</code></strong> -        TABLE</p></li>
</ul>

<h2>Not Available</h2>

<p>These functions are present in standard Lua, but are not available in TIS-100. </p>

<ul>
<li><code>coroutine</code>
</li>
<li><code>debug</code>
</li>
<li><code>dofile</code>
</li>
<li><code>load</code>
</li>
<li><code>loadfile</code>
</li>
<li><code>loadstring</code>
</li>
<li><code>module</code>
</li>
<li><code>os</code>
</li>
<li><code>pcall</code>
</li>
<li><code>rawequal</code>
</li>
<li><code>rawget</code>
</li>
<li><code>rawlen</code>
</li>
<li><code>rawset</code>
</li>
<li><code>require</code>
</li>
<li><code>setmetatable</code>
</li>
<li><code>xpcall</code>
</li>
</ul>


<div class="copyright">
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="float:right" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
<span class="copyrightlabel">Copyright</span>
Copyright 2015 Alan De Smet.
This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
<a href="https://github.com/AlanDeSmet/TIS-100-Hackers-Guide/tree/gh-pages">Fork this on GitHub!</a></p>
</div>

</body>
</html>
