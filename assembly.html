<!DOCTYPE html><html lang="en"><head><meta charset="utf-8">
<title>Assembly - TIS-100 Hacker's Guide</title>
<meta content='True' name='HandheldFriendly' />  
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0;' name='viewport' />  
<meta name="viewport" content="width=device-width" />
<link href='https://fonts.googleapis.com/css?family=Roboto:400,700,400italic,700italic|Michroma|Roboto+Condensed|Roboto+Mono:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="index.css" type="text/css">
</head>
<body>

<h1 class="sitetitle"> <a class="sitetitle" href="index.html">TIS-100 Hacker's Guide</a><br> </h1>
<h1> Assembly </h1>

<h2>Overall Node Behavior</h2>

<p>Nodes are evaluted starting at the upper left, moving left to right, and advancing down one row and returning to the left edge upon reaching the end of a row.  The behavior impacts using <code>ANY</code> as a destination.</p>

<h2>Comments</h2>

<p>The character # and any characters after it on a line are ignored.  Comments may follow a label or opcode and arguments.</p>

<h2>Labels</h2>

<p>A labelif present, must be the first thing on the line. It is terminated with a : which must be immediately adjacent to the label. Valid characters for labels are the letters A through Z, the digits 0 through 9, and the punctuation in the set of ~`$%^&amp;*()_-+={}[]|\;'"&lt;>,.?/ . There are no limitations on which characters may be in which positions of the label. A line may only have a single label.  A label must have at least one character before the colon. Labels may be up to 18 characters long, but the longest addressable label is 14 characters. </p>

<h2>Storage</h2>

<p><strong><code>ACC</code></strong> - Accumulator. Register.  Can be used as a <em>source</em> or <em>destination</em>. Initialized to 0.  Reads and writes are instantaneous.</p>

<p><strong><code>BAK</code></strong> - Backup. Register.  Only <code>SAV</code> and <code>SWP</code> interact with <code>BAK</code>.  The identifier “<code>BAK</code>” is never a valid identifier in a program.</p>

<p><strong><code>NIL</code></strong> - Nothing. Register. Can be used as a <em>source</em>, in which case “0” is returned.  Can be used as a <em>destination</em>, which which case the value is discarded.</p>

<p><strong><code>UP</code></strong>, <strong><code>DOWN</code></strong>, <strong><code>LEFT</code></strong>, <strong><code>RIGHT</code></strong> - Connections to adjacent nodes. Ports.  Can be used as a <em>source</em> or a <em>destination</em>.  When used as a destination, the value cannot be read by the adjacent node in the same cycle that it was written to.  Blocks until a <em>destination</em> value is used as a <em>source</em> by the adjacent node or a <em>source</em> is used as a <em>destination</em> by an adjacent node.</p>

<p><strong><code>ANY</code></strong> - Port. Can be used as a <em>source</em>, in which case the value will be read from the first port with a waiting value, as searched in the order LEFT, RIGHT, UP, DOWN.  Can be used as a <em>destination</em>, in which case the value is available to all ports; it will be cleared from all ports as soon as any adjacent node reads it.  Assuming all adjacent points try to read simulataneously, the winner will be selected in the order UP, LEFT, RIGHT, and DOWN.</p>

<p><strong><code>LAST</code></strong> - Port. Refers to the same port used by the last reference to <code>ANY</code>, either in read or write.</p>

<p><em>source</em> can be ACC, NIL, UP, DOWN, LEFT, RIGHT, ANY, LAST, or an integer from −999 through 999, inclusive.  If the value is an integer, it is used directory.  Otherwise the register or port is read for the value to use.</p>

<p><em>destination</em> can be ACC, NIL, UP, DOWN, LEFT, RIGHT, ANY, or LAST.</p>

<h2>Opcodes</h2>

<h3>NOP - No Operation - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>NOP</code></p>

<p>Does nothing.</p>

<h3>MOV - Move - 1-2 cycles</h3>

<p><strong>Syntax:</strong> <code>MOV</code> <em>source</em> <em>destination</em></p>

<p>Reads a value from <em>source</em> and write it to <em>destination</em>.  If <em>source</em> is a port, blocks until a value is present.  If <em>destination</em> is a port, blocks until the value is received.</p>

<p>1 cycle when writing ACC or NIL.</p>

<p>2 cycles when writing to UP, DOWN, LEFT, or RIGHT, assuming the neighboring node is willing to retrieve the value on the second cycle.  The data is not yet in the port until the end of the first cycle.  This prevents a single value from travelling multiple nodes in a single cycle.</p>

<h3>SWP - Swap - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>SWP</code></p>

<p>Swaps the values of ACC and BAK</p>

<h3>SAV - Save - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>SAV</code></p>

<p>Copies the value of ACC to BAK</p>

<h3>ADD - Add - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>ADD</code> <em>source</em></p>

<p>The <em>source</em> value is added to the value in ACC, and the result placed in ACC. Results greater than 999 are limited to 999.  Results less than −999 are limited to −999.</p>

<h3>SUB - Subtract - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>SUB</code> <em>source</em></p>

<p>The <em>source</em> value is subtracted to the value in ACC, and the result placed in ACC. Results greater than 999 are limited to 999.  Results less than −999 are limited to −999.</p>

<h3>NEG - Negate - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>NEG</code> <em>source</em></p>

<p>The value in ACC is negative (swapped between positive and negative) and written back into ACC.  0 is left unchanged.</p>

<h3>JMP - Jump - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JMP</code> <em>label</em></p>

<p>Transfer execution to the first instruction after <em>label</em>.</p>

<h3>JEZ - Jump if equal to zero - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JEZ</code> <em>label</em></p>

<p>If the ACC is 0, transfer execution to the first instruction after <em>label</em>.</p>

<h3>JNZ - Jump if not equal to zero - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JNZ</code> <em>label</em></p>

<p>If the ACC is not 0, transfer execution to the first instruction after <em>label</em>.</p>

<h3>JGZ - Jump if greater than zero - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JGZ</code> <em>label</em></p>

<p>If the ACC is greater than 0, transfer execution to the first instruction after <em>label</em>.</p>

<h3>JLZ - Jump if less than zero - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JLZ</code> <em>label</em></p>

<p>If the ACC is greater than 0, transfer execution to the first instruction after <em>label</em>.</p>

<h3>JRO - Jump relative offset - 1 cycle</h3>

<p><strong>Syntax:</strong> <code>JRO</code> <em>source</em></p>

<p>Transfer execution to the offset specified by <em>source</em>.  Offset is measured in instructions. Negative offsets can be used to move jump backward, positive offsets to jump forward, or 0 to execute the JRO instruction again.</p>


<div class="copyright">
<h2>Acknowledgments</h2>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="float:right" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
Copyright 2015 Alan De Smet.
This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
<a href="https://github.com/AlanDeSmet/TIS-100-Hackers-Guide/tree/gh-pages">Fork this on GitHub!</a></p>
</div>

</body>
</html>
